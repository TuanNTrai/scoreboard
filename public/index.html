<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="author" content="Miikka Tuominen">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scoreboard</title>
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" type="text/css" href="bulma.min.css">
  <link rel="stylesheet" href="styles.css">
  <script src="https://kit.fontawesome.com/a0258628d8.js" crossorigin="anonymous"></script>
</head>

<body>
  <div id="app" class="bg" v-bind:class="{ 'dark': course.active}" v-cloak>
  <section class="section hero is-fullheight">

    <!-- VUE-IF -->
    <div v-if="!this.course.active">
      <!-- HERO HEAD -->
      <div class="hero-head">
        <div class="container">
            <a href="/" class="logo">
              <img src="prize-144.png" width="60" height="60">
              <h1 class="title is-5">Scoreboard</h1>
            </a>
        </div>
      </div>

      <!-- HERO BODY -->
      <div class="hero-body">
        <div class="container">


          <!-- FORM JOIN -->
          <form class="form">
            <!-- ID INPUT -->
            <div class="field has-addons">
              <div class="control">
                <input type="text" class="input" placeholder="ID" v-model="gameID">
                <p class="help err">{{errors.join}}</p>
                <p class="help">Your turn to keep the score.</p>
              </div>
              <!-- ADD BUTTON -->
              <div class="control">
                <button class="button is-link lila" @click="join" :disabled="isDisabled">Join</button>
              </div>
            </div>
          </form>
          <!-- END OF FORM JOIN -->

          <br>


          <!-- PLAYERS LIST -->
          <div class="field" v-for="player in selectedPlayers" v-bind:key="player.name">
            <div class="control">
              <button class="button is-medium width-160" v-bind:class="{ 'is-primary': player.selected}"
                @click="toggleSelected(player)">{{player.name}}
              </button>
              <a class="delete" @click="deletePlayer(player.name)"></a>
            </div>
          </div>
          <!-- END OF PLAYERS LIST -->


          <!-- START -->
          <div class="field">
            <div class="control">
              <p class="help selected-count">{{selectedCount}} of {{selectedPlayers.length}} selected</p>
              <button class="button is-link is-medium width-160" @click="start">Start</button>
              <p class="help err">{{errors.start}}</p>
            </div>
          </div>
          <!-- START -->

          <br>

          <!-- ADD PLAYER FORM -->
          <form class="form">

            <!-- NAME INPUT -->
            <div class="field has-addons">
              <div class="control">
                <input type="text" v-model="player" class="input" placeholder="Player name">
              </div>
              <!-- ADD BUTTON -->
              <div class="control">
                <button @click="addPlayer" class="button is-link lila">Add</button>
              </div>
            </div>
            <p class="help err">{{errors.add}}</p>

          </form>
          <!-- END OF FORM -->


        </div>

      </div>

      <!-- HERO FOOTER -->
      <div class="hero-foot">
        <div class="container">
          <p>Made by: <a href="https://miikka.xyz" alt="Miikka Tuominen">Miikka Tuominen</a></p>
        </div>
      </div>

    </div>



    <!-- SCOREBOARD PART -->


    <!-- VUE-IF -->
    <!-- <div class="hero-head">

    </div> -->
    <div class="else" v-else>

    <div class="hero-head scoreboard">
      <div class="columns is-multiline is-mobile has-text-centered heading">
        <div class="column is-4">
          <p class="heading">Lane</p>
        </div>
        <div class="column is-4">
          <p class="heading">{{course.name}}: {{course.id}}</p>
        </div>
        <div class="column is-4">
          <p class="heading">Par</p>
        </div>

        <div class="column is-4"><p class="title is-5 light">{{course.active}}</p></div>
        <div class="column is-4"><a @click="deleteGame"><span class="icon exit"><i class="fas fa-times-circle"></i></span></a></div>
        <div class="column is-4"><p class="title is-5 light"><span class="par par-minus" @click="decPar">-</span>{{course.baskets[course.active].par}}<span class="par par-plus" @click="incPar">+</span></p></div>

      </div>
    </div>

    <div class="hero-body">
      <div class="container">


        <!-- PLAYERS -->
        <div class="card" v-for="(i, player) in course.baskets[1].scores" v-bind:key="player">
          <div class="card-content">
            <div class="content">

              <div class="columns is-mobile data">
                <div class="column">
                    <span class="name">{{player}}</span>
                </div>
                <div class="column is-6">
                  <button class="button round" @click="decScore(player)">-</button>
                  <span class="current">
                    {{course.baskets[course.active].scores[player].score}}
                  </span>
                  <button class="button round" @click="incScore(player)">+</button>
                </div>
                <div class="column is-2"><span class="sign" v-if="(totalScore(player) - totalPars()) >= 0">+</span><span class="total">{{totalScore(player) - totalPars()}}</span></div>
              </div>

            </div>
          </div>
          </div>
          <!-- END OF PLAYERS -->

        </div>
        <!-- END OF CONTAINER -->

      </div>
      <!-- END OF HERO BODY -->


        <div class="navbar is-fixed-bottom section no-pad has-text-centered">
          <button class="button nav-button" @click="saveAndPrev">Back</button>
          {{course.active}}
          <button class="button nav-button" @click="saveAndNext">Next</button>
        </div>



    </div>
    <!-- END VUE-IF -->

  </section>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script src="main.js"></script>
</body>

</html>
